{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\n\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst input = document.querySelector(\"#datetime-picker\");\r\nconst buttonStart = document.querySelector(\"button\");\r\nconst daysTimer = document.querySelector(\"span[data-days]\");\r\nconst hoursTimer = document.querySelector(\"span[data-hours]\");\r\nconst minutesTimer = document.querySelector(\"span[data-minutes]\");\r\nconst secondsTimer = document.querySelector(\"span[data-seconds]\");\r\nlet userSelectedDate = null;\r\n\r\nbuttonStart.addEventListener(\"click\", hadleStart);\r\n\r\nconst options = {\r\n    enableTime: true,\r\n    time_24hr: true,\r\n    defaultDate: new Date(),\r\n    minuteIncrement: 1,\r\n    onClose(selectedDates) {  \r\n        userSelectedDate = selectedDates[0];\r\n        if (userSelectedDate <= options.defaultDate) {\r\n            buttonStart.disabled = true;\r\n            return iziToast.show({\r\n                position: \"topRight\",\r\n                message: \"Please choose a date in the future\",\r\n                messageColor: \"#FFFFFF\",\r\n                messageSize: \"16px\",\r\n                color: \"#ef4040\",\r\n                progressBarColor: \"#ffbebe\",                \r\n                iconUrl: \"../img/error.svg\"\r\n                    });\r\n        }\r\n        buttonStart.disabled = false;\r\n    }\r\n};\r\n\r\nflatpickr.l10ns.default.firstDayOfWeek = 1;\r\n\r\nflatpickr(input, options);\r\n\r\nfunction hadleStart() {\r\n    buttonStart.disabled = true;\r\n    input.disabled = true;\r\n    const deltaTime = userSelectedDate - Date.now();\r\n    startTimer(deltaTime);\r\n}\r\n\r\nfunction convertMs(ms) {\r\n    // Number of milliseconds per unit of time\r\n    const second = 1000;\r\n    const minute = second * 60;\r\n    const hour = minute * 60;\r\n    const day = hour * 24;\r\n    // Remaining days\r\n    const days = addLeadingZero(Math.floor(ms / day));\r\n    // Remaining hours\r\n    const hours = addLeadingZero(Math.floor((ms % day) / hour));\r\n    // Remaining minutes\r\n    const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\r\n    // Remaining seconds\r\n    const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\r\n    return { days, hours, minutes, seconds };\r\n}\r\n\r\nfunction startTimer(ms) {\r\n    const intervalId = setInterval(() => {\r\n        if (ms <= 0) {\r\n            clearInterval(intervalId);\r\n            input.disabled = false;\r\n            return;\r\n        }\r\n        if (ms > 0) {            \r\n            const newTimeObj = convertMs(ms);\r\n            makeTimeupdateClockface(newTimeObj);\r\n            ms -= 1000;\r\n        }\r\n    }, 1000)\r\n}\r\n\r\nfunction addLeadingZero(value) {\r\n    return String(value).padStart(2, \"0\");\r\n}\r\n\r\nfunction makeTimeupdateClockface(obj) {\r\n    daysTimer.textContent = obj.days;\r\n    hoursTimer.textContent = obj.hours;\r\n    minutesTimer.textContent = obj.minutes;\r\n    secondsTimer.textContent = obj.seconds;\r\n}\r\n\r\n\r\n"],"names":["input","buttonStart","daysTimer","hoursTimer","minutesTimer","secondsTimer","userSelectedDate","hadleStart","options","selectedDates","iziToast","flatpickr","deltaTime","startTimer","convertMs","ms","days","addLeadingZero","hours","minutes","seconds","intervalId","newTimeObj","makeTimeupdateClockface","value","obj"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAChE,IAAIC,EAAmB,KAEvBL,EAAY,iBAAiB,QAASM,CAAU,EAEhD,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAEnB,GADAH,EAAmBG,EAAc,CAAC,EAC9BH,GAAoBE,EAAQ,YAC5B,OAAAP,EAAY,SAAW,GAChBS,EAAS,KAAK,CACjB,SAAU,WACV,QAAS,qCACT,aAAc,UACd,YAAa,OACb,MAAO,UACP,iBAAkB,UAClB,QAAS,kBACzB,CAAqB,EAEbT,EAAY,SAAW,EAC1B,CACL,EAEAU,EAAU,MAAM,QAAQ,eAAiB,EAEzCA,EAAUX,EAAOQ,CAAO,EAExB,SAASD,GAAa,CAClBN,EAAY,SAAW,GACvBD,EAAM,SAAW,GACjB,MAAMY,EAAYN,EAAmB,KAAK,IAAG,EAC7CO,EAAWD,CAAS,CACxB,CAEA,SAASE,EAAUC,EAAI,CAOnB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EAAe,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAClF,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASP,EAAWE,EAAI,CACpB,MAAMM,EAAa,YAAY,IAAM,CACjC,GAAIN,GAAM,EAAG,CACT,cAAcM,CAAU,EACxBrB,EAAM,SAAW,GACjB,MACH,CACD,GAAIe,EAAK,EAAG,CACR,MAAMO,EAAaR,EAAUC,CAAE,EAC/BQ,EAAwBD,CAAU,EAClCP,GAAM,GACT,CACJ,EAAE,GAAI,CACX,CAEA,SAASE,EAAeO,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASD,EAAwBE,EAAK,CAClCvB,EAAU,YAAcuB,EAAI,KAC5BtB,EAAW,YAAcsB,EAAI,MAC7BrB,EAAa,YAAcqB,EAAI,QAC/BpB,EAAa,YAAcoB,EAAI,OACnC"}