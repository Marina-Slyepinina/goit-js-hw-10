{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst buttonStart = document.querySelector(\"button\");\nconst daysTimer = document.querySelector(\"span[data-days]\");\nconst hoursTimer = document.querySelector(\"span[data-hours]\");\nconst minutesTimer = document.querySelector(\"span[data-minutes]\");\nconst secondsTimer = document.querySelector(\"span[data-seconds]\");\nlet userSelectedDate = null;\n\nbuttonStart.addEventListener(\"click\", hadleStart);\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {  \n        userSelectedDate = selectedDates[0];\n        if (userSelectedDate <= options.defaultDate) {\n            buttonStart.disabled = true;\n            return iziToast.show({\n                position: \"topRight\",\n                message: \"Please choose a date in the future\",\n                messageColor: \"#FFFFFF\",\n                messageSize: \"16px\",\n                color: \"#ef4040\",\n                progressBarColor: \"#ffbebe\",                \n                iconUrl: \"../img/error.svg\"\n                    });\n        }\n        buttonStart.disabled = false;\n    }\n};\n\nflatpickr.l10ns.default.firstDayOfWeek = 1;\n\nflatpickr(input, options);\n\nfunction hadleStart() {\n    buttonStart.disabled = true;\n    input.disabled = true;\n    const deltaTime = userSelectedDate - Date.now();\n    startTimer(deltaTime);\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    // Remaining days\n    const days = addLeadingZero(Math.floor(ms / day));\n    // Remaining hours\n    const hours = addLeadingZero(Math.floor((ms % day) / hour));\n    // Remaining minutes\n    const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n    // Remaining seconds\n    const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n    return { days, hours, minutes, seconds };\n}\n\nfunction startTimer(ms) {\n    const intervalId = setInterval(() => {\n        if (ms <= 0) {\n            clearInterval(intervalId);\n            input.disabled = false;\n            return;\n        }\n        if (ms > 0) {            \n            const newTimeObj = convertMs(ms);\n            makeTimeupdateClockface(newTimeObj);\n            ms -= 1000;\n        }\n    }, 1000)\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n}\n\nfunction makeTimeupdateClockface(obj) {\n    daysTimer.textContent = obj.days;\n    hoursTimer.textContent = obj.hours;\n    minutesTimer.textContent = obj.minutes;\n    secondsTimer.textContent = obj.seconds;\n}\n\n\n"],"names":["input","buttonStart","daysTimer","hoursTimer","minutesTimer","secondsTimer","userSelectedDate","hadleStart","options","selectedDates","iziToast","flatpickr","deltaTime","startTimer","convertMs","ms","days","addLeadingZero","hours","minutes","seconds","intervalId","newTimeObj","makeTimeupdateClockface","value","obj"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAChE,IAAIC,EAAmB,KAEvBL,EAAY,iBAAiB,QAASM,CAAU,EAEhD,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAEnB,GADAH,EAAmBG,EAAc,CAAC,EAC9BH,GAAoBE,EAAQ,YAC5B,OAAAP,EAAY,SAAW,GAChBS,EAAS,KAAK,CACjB,SAAU,WACV,QAAS,qCACT,aAAc,UACd,YAAa,OACb,MAAO,UACP,iBAAkB,UAClB,QAAS,kBACzB,CAAqB,EAEbT,EAAY,SAAW,EAC1B,CACL,EAEAU,EAAU,MAAM,QAAQ,eAAiB,EAEzCA,EAAUX,EAAOQ,CAAO,EAExB,SAASD,GAAa,CAClBN,EAAY,SAAW,GACvBD,EAAM,SAAW,GACjB,MAAMY,EAAYN,EAAmB,KAAK,IAAG,EAC7CO,EAAWD,CAAS,CACxB,CAEA,SAASE,EAAUC,EAAI,CAOnB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EAAe,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAClF,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASP,EAAWE,EAAI,CACpB,MAAMM,EAAa,YAAY,IAAM,CACjC,GAAIN,GAAM,EAAG,CACT,cAAcM,CAAU,EACxBrB,EAAM,SAAW,GACjB,MACH,CACD,GAAIe,EAAK,EAAG,CACR,MAAMO,EAAaR,EAAUC,CAAE,EAC/BQ,EAAwBD,CAAU,EAClCP,GAAM,GACT,CACJ,EAAE,GAAI,CACX,CAEA,SAASE,EAAeO,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASD,EAAwBE,EAAK,CAClCvB,EAAU,YAAcuB,EAAI,KAC5BtB,EAAW,YAAcsB,EAAI,MAC7BrB,EAAa,YAAcqB,EAAI,QAC/BpB,EAAa,YAAcoB,EAAI,OACnC"}